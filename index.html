<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>INTERPARK TICKETING PRACTICE</title>

<style>
body {margin:0;font-family:system-ui;background:#f2f2f2;}
#app{max-width:420px;margin:auto;padding:12px;}
h1{text-align:center;color:#e6002d;}
button{width:100%;padding:14px;border:none;border-radius:6px;background:#e6002d;color:white;font-size:16px;margin-top:10px;}
.card{background:white;padding:12px;border-radius:8px;margin-top:10px;}
.calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;}
.day{padding:6px;text-align:center;font-size:13px;border-radius:4px;background:#eee;}
.active{background:#e6002d;color:white;}
.disabled{background:#ccc;color:#888;}
.seat-zone{margin-top:10px;}
.zone-title{font-weight:bold;margin:6px 0;}
.seats{display:grid;grid-template-columns:repeat(12,1fr);gap:3px;}
.seat{height:14px;border-radius:2px;}
.free{background:#009a44;}
.taken{background:#777;}
</style>
</head>

<body>
<div id="app">
<h1>INTERPARK TICKET</h1>
<div id="screen"></div>
</div>

<script>
const screen=document.getElementById("screen");
let queue=Math.floor(Math.random()*50000)+1;
let startTime=0;

function start(){
screen.innerHTML=`
<div class="card">5ë§Œëª… ë™ì‹œ ì ‘ì† ì¤‘...</div>
<button onclick="count()">ì‹œì‘í•˜ê¸°</button>`;
}

function count(){
let c=5;
screen.innerHTML=`<div class="card"><h2 id="c">5</h2></div>`;
let t=setInterval(()=>{
c--;
document.getElementById("c").innerText=c;
if(c==0){clearInterval(t);ready();}
},1000);
}

function ready(){
startTime=performance.now();
screen.innerHTML=`
<div class="card">ëŒ€ê¸°ìˆœë²ˆ <b>${queue}</b>ë²ˆ</div>
<button onclick="captcha()">ì˜ˆë§¤í•˜ê¸°</button>`;
}

function captcha(){
const code=Array.from({length:5},()=>String.fromCharCode(65+Math.random()*26|0)).join("");
screen.innerHTML=`
<div class="card">
<p>ë³´ì•ˆë¬¸ì ì…ë ¥</p>
<h2>${code}</h2>
<input id="i" placeholder="ì˜ë¬¸ ëŒ€ë¬¸ì">
<button onclick="check('${code}')">í™•ì¸</button>
</div>`;
}

function check(code){
if(document.getElementById("i").value!==code){alert("ë³´ì•ˆë¬¸ì ì˜¤ë¥˜");captcha();return;}
calendar();
}

function calendar(){
screen.innerHTML=`
<div class="card">
<p>ë‚ ì§œ ì„ íƒ</p>
<button onclick="time('27')">2/27 (ê¸ˆ) 7PM</button>
<button onclick="time('28')">2/28 (í† ) 6PM</button>
<button onclick="time('3/1')">3/1 (ì¼) 5PM</button>
</div>`;
}

function time(){
seat();
}

function seat(){
function make(rate,zone){
return Array.from({length:120},()=>`
<div class="seat ${Math.random()<rate?'taken':'free'}"
onclick="${Math.random()<rate?'alert(\\'ì´ë¯¸ ì„ íƒëœ ì¢Œì„ì…ë‹ˆë‹¤\\')':`trySeat('${zone}')`}">
</div>`).join("");
}
screen.innerHTML=`
<p><b>KSPO DOME ì¢Œì„</b></p>
<div class="seat-zone"><div class="zone-title">ğŸ”¥ FLOOR</div><div class="seats">${make(0.95,'floor')}</div></div>
<div class="seat-zone"><div class="zone-title">1ì¸µ</div><div class="seats">${make(0.80,'one')}</div></div>
<div class="seat-zone"><div class="zone-title">2ì¸µ</div><div class="seats">${make(0.50,'two')}</div></div>`;
}

function trySeat(zone){
const rate={floor:0.015,one:0.06,two:0.2}[zone];
setTimeout(()=>{
Math.random()<rate?finish():alert("ë‹¤ë¥¸ ê³ ê°ì´ ë¨¼ì € ì„ íƒí–ˆìŠµë‹ˆë‹¤");
},Math.random()*800+400);
}

function finish(){
const t=Math.floor(performance.now()-startTime);
screen.innerHTML=`<h2>ì˜ˆë§¤ ì„±ê³µ ğŸ‰</h2><p>${t}ms</p><button onclick="location.reload()">ë‹¤ì‹œ</button>`;
}

start();
</script>
</body>
</html>
