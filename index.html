<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>INTERPARK PRACTICE</title>

<style>
body{margin:0;font-family:-apple-system;background:#f4f6fa}
#app{max-width:420px;margin:auto;padding:16px}
h1{text-align:center;color:#0066cc}
button{width:100%;padding:12px;border:none;border-radius:8px;background:#0066cc;color:#fff;font-size:15px;margin-top:8px}
.card{background:#fff;border-radius:12px;padding:16px;margin-top:12px}
.center{text-align:center}

.zone-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:5px}
.zone{padding:10px 0;border-radius:6px;text-align:center;font-weight:700;font-size:12px}
.floor{background:#ff6b6b}
.one{background:#ffd43b}
.two{background:#69db7c}

.seat-wrap{height:45vh;overflow:auto;background:#fff;border-radius:12px;padding:8px}
.seats{display:grid;grid-template-columns:repeat(24,1fr);gap:2px}
.seat{height:7px;border-radius:1px}
.free{background:#2db400}
.dead{background:#888}
</style>
</head>

<body>
<div id="app">
  <h1>INTERPARK</h1>
  <div id="screen"></div>
</div>

<script>
const screen=document.getElementById("screen");
let startTime=0;
let clicked=false;
let myRank=0;

/* ë­í‚¹ */
function saveRank(rank){
  let r=JSON.parse(localStorage.getItem("rank")||"[]");
  r.push(rank);
  r=r.sort((a,b)=>a-b).slice(0,10);
  localStorage.setItem("rank",JSON.stringify(r));
}

/* ì‹œì‘ */
function start(){
  screen.innerHTML=`
    <div class="card center">í‹°ì¼“íŒ… ì—°ìŠµ</div>
    <button onclick="count()">ì‹œì‘í•˜ê¸°</button>
  `;
}

/* ì¹´ìš´íŠ¸ */
function count(){
  let c=5;
  clicked=false;
  screen.innerHTML=`
    <div class="card center"><h2 id="c">5</h2></div>
    <button onclick="enter()">ì‹œì‘í•˜ê¸°</button>
  `;
  const t=setInterval(()=>{
    c--;
    document.getElementById("c").innerText=c;
    if(c===0){
      startTime=performance.now();
      clearInterval(t);
    }
  },1000);
}

/* ëŒ€ê¸° ìˆœë²ˆ ê³„ì‚° */
function enter(){
  if(clicked || startTime===0) return;
  const diff=performance.now()-startTime;
  if(diff<0) return;
  clicked=true;

  myRank=Math.min(
    50000,
    Math.floor(7000 + diff*15)
  );
  saveRank(myRank);

  screen.innerHTML=`
    <div class="card center">
      <p>ë‚˜ì˜ ëŒ€ê¸°ìˆœë²ˆ</p>
      <h2>${myRank}ë²ˆ</h2>
    </div>
  `;
  setTimeout(calendar,5000);
}

/* ë‹¬ë ¥ */
let month=2;
function calendar(){
  screen.innerHTML=`
    <div class="card center">
      <h3>2026ë…„ ${month}ì›”</h3>
      <button onclick="selectDate('${month===2?'2/27 7PM':'3/1 5PM'}')">
        ${month===2?'2ì›” 27ì¼ (ê¸ˆ) 7PM':'3ì›” 1ì¼ (ì¼) 5PM'}
      </button>
      <button onclick="month=month===2?3:2;calendar()">â–¶</button>
    </div>
  `;
}

/* ë³´ì•ˆì½”ë“œ */
function selectDate(t){
  const code=Math.random().toString(36).substring(2,6).toUpperCase();
  screen.innerHTML=`
    <div class="card center">
      <p>${t}</p>
      <p><b>${code}</b></p>
      <input id="cap" placeholder="ë³´ì•ˆì½”ë“œ" oninput="this.value=this.value.toUpperCase()">
      <button onclick="check('${code}')">í™•ì¸</button>
    </div>
  `;
}
function check(c){
  if(document.getElementById("cap").value===c) zone();
  else alert("ë³´ì•ˆì½”ë“œ ì˜¤ë¥˜");
}

/* êµ¬ì—­ */
function zone(){
  const map=[
    2,2,2,1,1,'F','F',1,1,2,2,2,
    2,2,2,2,1,1,1,1,2,2,2,2
  ];
  screen.innerHTML=`
    <div class="zone-grid">
      ${map.map(z=>{
        const cls=z==='F'?'floor':z===1?'one':'two';
        return `<div class="zone ${cls}" onclick="seat('${cls}')">${z==='F'?'FLOOR':z+'ì¸µ'}</div>`;
      }).join("")}
    </div>
  `;
}

/* ì¢Œì„ */
function seat(z){
  const rate={floor:0.998,one:0.97,two:0.9}[z];
  screen.innerHTML=`
    <button onclick="zone()">â† êµ¬ì—­</button>
    <div class="seat-wrap"><div class="seats">
      ${Array.from({length:480},()=>Math.random()<rate
        ?`<div class="seat dead"></div>`
        :`<div class="seat free" onclick="trySeat(this,'${z}')"></div>`
      ).join("")}
    </div></div>
  `;
}

function trySeat(el,z){
  const fail={floor:0.7,one:0.5,two:0.3}[z];
  if(Math.random()<fail){
    el.className="seat dead";
    alert("ë‹¤ë¥¸ ì‚¬ìš©ìê°€ ë¨¼ì € ì„ íƒí–ˆìŠµë‹ˆë‹¤");
  }else{
    alert("ğŸ‰ ì˜ˆë§¤ ì„±ê³µ");
    location.reload();
  }
}

start();
</script>
</body>
</html>