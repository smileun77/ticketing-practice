<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>INTERPARK PRACTICE</title>

<style>
body{margin:0;background:#f4f6fa;font-family:-apple-system}
#app{max-width:420px;margin:auto;height:100vh;display:flex;flex-direction:column}
h1{text-align:center;color:#0066cc;margin:20px 0}
#screen{flex:1;padding:20px}

button{
  width:100%;padding:14px;margin-top:10px;
  border:none;border-radius:10px;
  background:#0066cc;color:#fff;font-size:16px
}
.card{background:#fff;border-radius:14px;padding:20px;text-align:center}

.calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;margin-top:14px}
.day{padding:10px 0;border-radius:6px;background:#e9ecef}
.active{background:#0066cc;color:#fff}
.disabled{background:#ccc;color:#777}

.zone-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.zone{padding:20px 0;border-radius:10px;font-weight:700}
.floor{background:#ff6b6b}
.one{background:#ffd43b}
.two{background:#69db7c}

.seat-wrap{margin-top:10px;height:40vh;overflow:auto;background:#fff;border-radius:12px;padding:6px}
.seats{display:grid;grid-template-columns:repeat(12,1fr);gap:3px}
.seat{height:10px;border-radius:2px;background:#2db400}

.popup{
  position:fixed;inset:0;
  background:rgba(0,0,0,.4);
  display:flex;align-items:center;justify-content:center
}
.popup .card{width:80%}
</style>
</head>

<body>
<div id="app">
  <h1>INTERPARK</h1>
  <div id="screen"></div>
</div>

<script>
const screen=document.getElementById("screen");

let startTime=0, clickTime=0, rank=0;
let zoneType="", tryCount=0;

/* ì‹œì‘ í™”ë©´ */
function start(){
  screen.innerHTML=`
    <div style="margin-top:60px">
      <button onclick="count()">ì‹œì‘í•˜ê¸°</button>
      <button onclick="showRanking()">ë­í‚¹ë³´ê¸°</button>
    </div>`;
}

/* ì¹´ìš´íŠ¸ */
function count(){
  let c=5;
  screen.innerHTML=`
    <div class="card">
      <h2 id="cnt">${c}</h2>
      <button onclick="enter()">ì‹œì‘í•˜ê¸°</button>
    </div>`;
  const t=setInterval(()=>{
    c--; document.getElementById("cnt").innerText=c;
    if(c===0){ startTime=performance.now(); clearInterval(t); }
  },1000);
}

/* ëŒ€ê¸° ìˆœë²ˆ */
function enter(){
  if(!startTime){return;}
  clickTime=performance.now();
  const diff=(clickTime-startTime)/1000;
  if(diff<1) rank=7000+Math.random()*2000|0;
  else if(diff<2) rank=10000+Math.random()*10000|0;
  else rank=30000+Math.random()*20000|0;

  screen.innerHTML=`<div class="card"><h2>${rank}ë²ˆ</h2></div>`;
  setTimeout(calendar,5000);
}

/* ë‹¬ë ¥ */
function calendar(){
  screen.innerHTML=`
    <div class="card">
      <h3>2026ë…„ 2ì›”</h3>
      <div class="calendar">
        <div class="disabled day">26</div>
        <div class="active day" onclick="captcha('2/27 ê¸ˆ 7PM')">27</div>
        <div class="active day" onclick="captcha('2/28 í†  6PM')">28</div>
      </div>
      <button onclick="calendar2()">3ì›” â–¶</button>
    </div>`;
}
function calendar2(){
  screen.innerHTML=`
    <div class="card">
      <h3>2026ë…„ 3ì›”</h3>
      <div class="calendar">
        <div class="active day" onclick="captcha('3/1 ì¼ 5PM')">1</div>
      </div>
    </div>`;
}

/* ë³´ì•ˆì½”ë“œ */
function captcha(info){
  const code=[...Array(6)].map(()=>String.fromCharCode(65+Math.random()*26|0)).join("");
  screen.innerHTML=`
    <div class="card">
      <p>${info}</p>
      <h2>${code}</h2>
      <input id="cap" maxlength="6"
        oninput="this.value=this.value.toUpperCase().replace(/[^A-Z]/g,'')">
      <button onclick="check('${code}')">í™•ì¸</button>
    </div>`;
}
function check(c){
  if(document.getElementById("cap").value===c) zone();
  else alert("ë³´ì•ˆì½”ë“œ ì˜¤ë¥˜");
}

/* êµ¬ì—­ */
function zone(){
  tryCount=0;
  screen.innerHTML=`
    <div class="zone-grid">
      <div class="zone floor" onclick="seat('F')">FLOOR</div>
      <div class="zone one" onclick="seat('1')">1ì¸µ</div>
      <div class="zone two" onclick="seat('2')">2ì¸µ</div>
    </div>`;
}

/* ì¢Œì„ */
function seat(z){
  zoneType=z;
  const cnt=z==='F'?3:z==='1'?13:60;
  screen.innerHTML=`
    <div class="seat-wrap">
      <div class="seats">
        ${Array.from({length:cnt},()=>`<div class="seat" onclick="trySeat(this)"></div>`).join("")}
      </div>
    </div>`;
}

/* ì¢Œì„ ì‹œë„ */
function trySeat(el){
  tryCount++;
  const p=zoneType==='F'?0.0005:zoneType==='1'?0.03:0.05;
  if(Math.random()>p){
    el.remove();
    alert("ì´ë¯¸ ì„ íƒëœ ì¢Œì„ì…ë‹ˆë‹¤");
  }else{
    const time=((performance.now()-startTime)/1000).toFixed(2);
    saveRank(time);
    popup(time);
  }
}

/* ì„±ê³µ íŒì—… */
function popup(time){
  document.body.insertAdjacentHTML("beforeend",`
    <div class="popup">
      <div class="card">
        <h2>ğŸ‰ ì˜ˆë§¤ ì„±ê³µ</h2>
        <p>${time}s / ${rank}ë²ˆ / ${zoneType}ì¸µ</p>
        <p>ì¢Œì„ ì‹œë„ ${tryCount}íšŒ</p>
        <button onclick="location.reload()">í™•ì¸</button>
      </div>
    </div>`);
}

/* ë­í‚¹ */
function saveRank(t){
  let r=JSON.parse(localStorage.getItem("rank")||"[]");
  r.push({t,rank,zone:zoneType,try:tryCount});
  r.sort((a,b)=>a.t-b.t);
  localStorage.setItem("rank",JSON.stringify(r.slice(0,10)));
}
function showRanking(){
  const r=JSON.parse(localStorage.getItem("rank")||"[]");
  screen.innerHTML=`
    <div class="card">
      <h3>ğŸ† ë­í‚¹</h3>
      ${r.map((v,i)=>`
        <p>${i+1}. ${v.t}s / ${v.rank}ë²ˆ / ${v.zone} / ${v.try}íšŒ</p>`).join("")}
      <button onclick="start()">ëŒì•„ê°€ê¸°</button>
    </div>`;
}

start();
</script>
</body>
</html>